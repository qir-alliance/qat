<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
     
    <meta name="author" content="troels" />
     
    <link rel="canonical" href="https://qir-alliance.github.io/qat/UserGuide/DebuggingIR/" />
     
    <link rel="shortcut icon" href="../../img/favicon.ico" />
    
    <title>
      Debugging an LLVM IR - QAT Documentation
    </title>
    <link href="../../css/styles.css" rel="stylesheet" />
    <link href="../../css/font-awesome.min.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/monokai-sublime.min.css"
    />
    <link href="../../css/quantum-colors.css" rel="stylesheet" />

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/llvm.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script> 
  </head>

  <body>
    <div class="h-screen flex overflow-hidden bg-white">
      <!-- Off-canvas menu for mobile, show/hide based on off-canvas menu state. -->
      <div class="lg:hidden hidden" id="sidebar">
        <div class="fixed inset-0 flex z-40">
          <!--
        Off-canvas menu overlay, show/hide based on off-canvas menu state.

        Entering: "transition-opacity ease-linear duration-300"
          From: "opacity-0"
          To: "opacity-100"
        Leaving: "transition-opacity ease-linear duration-300"
          From: "opacity-100"
          To: "opacity-0"
      -->
          <div class="fixed inset-0" aria-hidden="true">
            <div class="absolute inset-0 bg-gray-600 opacity-75"></div>
          </div>
          <!--
        Off-canvas menu, show/hide based on off-canvas menu state.

        Entering: "transition ease-in-out duration-300 transform"
          From: "-translate-x-full"
          To: "translate-x-0"
        Leaving: "transition ease-in-out duration-300 transform"
          From: "translate-x-0"
          To: "-translate-x-full"
      -->
          <div
            class="relative flex-1 flex flex-col max-w-xs w-full pt-5 pb-4 bg-gray-800"
          >
            <div class="absolute top-0 right-0 -mr-12 pt-2">
              <button
                class="ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
                id="sidebarClose"
              >
                <span class="sr-only">Close sidebar</span>
                <!-- Heroicon name: x -->
                <svg
                  class="h-6 w-6 text-white"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  aria-hidden="true"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M6 18L18 6M6 6l12 12"
                  />
                </svg>
              </button>
            </div>
            <div class="flex flex-col justify-center items-center flex-shrink-0 px-4">
  <svg
    class="h-16 w-16"
    id="outputsvg"
    width="302.20001"
    height="292.73355"
    viewBox="0 0 3022.0001 2927.3355"
    version="1.1"
    sodipodi:docname="93013746.svg"
    xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
    xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:svg="http://www.w3.org/2000/svg"
  >
    <defs id="defs40" />
    <sodipodi:namedview
      id="namedview38"
      pagecolor="#ffffff"
      bordercolor="#666666"
      borderopacity="1.0"
      showgrid="false"
      fit-margin-top="0"
      fit-margin-left="0"
      fit-margin-right="0"
      fit-margin-bottom="0"
    />
    <g
      id="l3qWAVepmhNjXiGFCK8Ygm8"
      fill="#ffffff"
      transform="translate(-510,-500.49862)"
    >
      <g id="g26">
        <path
          id="powjCKlys"
          d="M 890,2694 C 709,2646 609,2553 549,2375 l -24,-70 V 1605 905 l 27,-72 c 30,-83 86,-171 130,-208 16,-14 68,-44 114,-66 109,-53 228,-69 391,-52 92,9 120,16 186,49 103,49 166,107 204,186 58,119 65,152 71,326 4,133 7,162 18,158 10,-4 14,2 14,19 0,21 -13,30 -85,65 l -85,41 v 263 264 l 28,7 c 15,4 52,19 82,33 44,22 56,33 58,55 3,21 0,26 -12,21 -14,-5 -16,10 -16,127 0,211 -28,301 -115,378 -20,18 -36,34 -34,36 2,2 45,9 94,17 l 90,13 3,73 3,72 -373,-1 c -295,0 -385,-3 -428,-15 z m 327,-275 c 46,-26 87,-82 106,-144 9,-30 12,-201 12,-665 0,-592 -1,-628 -19,-684 -35,-105 -112,-158 -230,-157 -118,0 -203,62 -237,171 -19,63 -19,92 -17,690 l 3,625 26,56 c 28,59 76,105 131,126 54,21 175,11 225,-18 z"
        />
        <path
          id="pXDrvybHy"
          d="m 2410,2340 c 0,-333 -2,-369 -16,-363 -12,4 -15,0 -12,-18 3,-24 15,-32 101,-69 l 47,-21 v -259 -259 l -75,-35 c -64,-30 -75,-38 -75,-60 0,-18 4,-24 15,-20 13,5 15,-36 15,-340 V 550 h 378 c 427,0 466,5 559,67 70,46 125,130 150,227 15,58 18,111 18,296 0,252 -9,305 -65,376 -36,45 -132,112 -172,121 -34,7 -37,23 -5,23 12,1 47,13 77,29 63,31 122,101 140,165 7,25 15,180 20,400 5,197 11,380 15,407 l 7,49 h -155 -155 l -6,-32 c -3,-18 -8,-190 -11,-383 -8,-429 -12,-446 -120,-496 -34,-16 -66,-19 -207,-19 h -168 v 465 465 h -150 -150 z m 695,-864 c 28,-8 48,-24 70,-55 l 30,-43 v -201 c 0,-349 -25,-377 -337,-377 h -158 v 345 345 l 178,-1 c 106,0 193,-5 217,-13 z"
        />
      </g>
    </g>
    <g
      id="l6geLyeKy0gshdvsOIcFawK"
      fill="#14775d"
      transform="translate(-510,-500.49862)"
    >
      <g id="g30">
        <path
          id="pFwHav8Wh"
          d="m 1830,2411 v -299 l -46,-38 c -78,-65 -217,-144 -281,-160 l -23,-6 v -293 -293 l 103,-52 c 57,-28 134,-75 173,-104 l 69,-53 3,-281 2,-282 h 38 c 20,0 61,-3 90,-6 48,-6 52,-5 52,15 0,12 -6,21 -15,21 -13,0 -15,38 -15,278 0,261 1,279 20,312 11,19 28,52 38,72 9,20 25,39 35,42 12,3 17,14 17,36 0,29 -2,31 -17,19 -10,-7 -25,-22 -34,-33 -17,-19 -18,-19 -73,31 -61,56 -126,102 -187,134 l -40,20 3,122 3,122 45,24 c 25,14 78,50 119,80 41,31 82,62 93,70 16,12 21,11 41,-8 31,-28 37,-27 37,9 0,17 9,48 20,70 19,37 20,59 20,385 v 345 h -145 -145 z"
        />
      </g>
    </g>
    <g
      id="ls88IYZfP5b5b8x7RYseij"
      fill="#1cb78e"
      transform="translate(-510,-500.49862)"
    >
      <g id="g34">
        <path
          id="pCM7FVo6B"
          d="m 2090,2378 v -333 l -31,-55 c -25,-46 -28,-58 -18,-76 14,-27 124,-110 197,-149 l 52,-28 v -122 -122 l -76,-48 c -98,-62 -176,-134 -222,-204 l -37,-56 -3,-317 c -3,-300 -2,-318 15,-319 17,-1 190,-1 226,0 16,1 17,21 17,271 0,235 2,274 17,296 23,36 123,104 236,159 l 97,48 -2,289 -3,289 -60,27 c -102,46 -195,102 -241,146 l -44,43 v 296 297 h -60 -60 z"
        />
      </g>
    </g>
  </svg>

  <span class="text-white">Adaptor Tool</span>
</div>
            <div class="mt-5 flex-1 h-0 overflow-y-auto">
              <nav class="px-2">
                <h3
                  class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                  id="teams-headline"
                >
                  User guide
                </h3>
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../QuickStart/"
                  >Quick start</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../BuildingLibrary/"
                  >Building the library</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../IntroductionToProfiles/"
                  >Introduction to profiles</a
                > 
                <h3
                  class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                  id="teams-headline"
                >
                  Developer guide
                </h3>
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../DeveloperGuide/ArchitectureOverview/"
                  >Architecture Overview</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../DeveloperGuide/WritingComponent/"
                  >Writing a Component</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../DeveloperGuide/ConfigurationLibrary/"
                  >Configuration Library</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../DeveloperGuide/WritingRuleTests/"
                  >Rule based extensions</a
                > 
                <h3
                  class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                  id="teams-headline"
                >
                  Api
                </h3>
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../Api/Classes/"
                  >Classes</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../Api/Namespaces/"
                  >Namespaces</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../Api/Modules/"
                  >Modules</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../Api/Files/"
                  >Files</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../Api/Pages/"
                  >Pages</a
                > 
                <h3
                  class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                  id="teams-headline"
                >
                  Contributing
                </h3>
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../DeveloperGuide/CodeQuality/"
                  >Code quality</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../DeveloperGuide/DeveloperFAQ/"
                  >Developer FAQ</a
                > 
              </nav>
            </div>
          </div>
          <div class="flex-shrink-0 w-14" aria-hidden="true">
            <!-- Dummy element to force sidebar to shrink to fit close icon -->
          </div>
        </div>
      </div>

      <!-- Static sidebar for desktop -->
      <div class="hidden lg:flex lg:flex-shrink-0">
        <div
          class="flex flex-col w-64 border-r border-gray-200 pt-5 pb-4 bg-gray-800"
        >
          <div class="flex flex-col justify-center items-center flex-shrink-0 px-4">
  <svg
    class="h-16 w-16"
    id="outputsvg"
    width="302.20001"
    height="292.73355"
    viewBox="0 0 3022.0001 2927.3355"
    version="1.1"
    sodipodi:docname="93013746.svg"
    xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
    xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:svg="http://www.w3.org/2000/svg"
  >
    <defs id="defs40" />
    <sodipodi:namedview
      id="namedview38"
      pagecolor="#ffffff"
      bordercolor="#666666"
      borderopacity="1.0"
      showgrid="false"
      fit-margin-top="0"
      fit-margin-left="0"
      fit-margin-right="0"
      fit-margin-bottom="0"
    />
    <g
      id="l3qWAVepmhNjXiGFCK8Ygm8"
      fill="#ffffff"
      transform="translate(-510,-500.49862)"
    >
      <g id="g26">
        <path
          id="powjCKlys"
          d="M 890,2694 C 709,2646 609,2553 549,2375 l -24,-70 V 1605 905 l 27,-72 c 30,-83 86,-171 130,-208 16,-14 68,-44 114,-66 109,-53 228,-69 391,-52 92,9 120,16 186,49 103,49 166,107 204,186 58,119 65,152 71,326 4,133 7,162 18,158 10,-4 14,2 14,19 0,21 -13,30 -85,65 l -85,41 v 263 264 l 28,7 c 15,4 52,19 82,33 44,22 56,33 58,55 3,21 0,26 -12,21 -14,-5 -16,10 -16,127 0,211 -28,301 -115,378 -20,18 -36,34 -34,36 2,2 45,9 94,17 l 90,13 3,73 3,72 -373,-1 c -295,0 -385,-3 -428,-15 z m 327,-275 c 46,-26 87,-82 106,-144 9,-30 12,-201 12,-665 0,-592 -1,-628 -19,-684 -35,-105 -112,-158 -230,-157 -118,0 -203,62 -237,171 -19,63 -19,92 -17,690 l 3,625 26,56 c 28,59 76,105 131,126 54,21 175,11 225,-18 z"
        />
        <path
          id="pXDrvybHy"
          d="m 2410,2340 c 0,-333 -2,-369 -16,-363 -12,4 -15,0 -12,-18 3,-24 15,-32 101,-69 l 47,-21 v -259 -259 l -75,-35 c -64,-30 -75,-38 -75,-60 0,-18 4,-24 15,-20 13,5 15,-36 15,-340 V 550 h 378 c 427,0 466,5 559,67 70,46 125,130 150,227 15,58 18,111 18,296 0,252 -9,305 -65,376 -36,45 -132,112 -172,121 -34,7 -37,23 -5,23 12,1 47,13 77,29 63,31 122,101 140,165 7,25 15,180 20,400 5,197 11,380 15,407 l 7,49 h -155 -155 l -6,-32 c -3,-18 -8,-190 -11,-383 -8,-429 -12,-446 -120,-496 -34,-16 -66,-19 -207,-19 h -168 v 465 465 h -150 -150 z m 695,-864 c 28,-8 48,-24 70,-55 l 30,-43 v -201 c 0,-349 -25,-377 -337,-377 h -158 v 345 345 l 178,-1 c 106,0 193,-5 217,-13 z"
        />
      </g>
    </g>
    <g
      id="l6geLyeKy0gshdvsOIcFawK"
      fill="#14775d"
      transform="translate(-510,-500.49862)"
    >
      <g id="g30">
        <path
          id="pFwHav8Wh"
          d="m 1830,2411 v -299 l -46,-38 c -78,-65 -217,-144 -281,-160 l -23,-6 v -293 -293 l 103,-52 c 57,-28 134,-75 173,-104 l 69,-53 3,-281 2,-282 h 38 c 20,0 61,-3 90,-6 48,-6 52,-5 52,15 0,12 -6,21 -15,21 -13,0 -15,38 -15,278 0,261 1,279 20,312 11,19 28,52 38,72 9,20 25,39 35,42 12,3 17,14 17,36 0,29 -2,31 -17,19 -10,-7 -25,-22 -34,-33 -17,-19 -18,-19 -73,31 -61,56 -126,102 -187,134 l -40,20 3,122 3,122 45,24 c 25,14 78,50 119,80 41,31 82,62 93,70 16,12 21,11 41,-8 31,-28 37,-27 37,9 0,17 9,48 20,70 19,37 20,59 20,385 v 345 h -145 -145 z"
        />
      </g>
    </g>
    <g
      id="ls88IYZfP5b5b8x7RYseij"
      fill="#1cb78e"
      transform="translate(-510,-500.49862)"
    >
      <g id="g34">
        <path
          id="pCM7FVo6B"
          d="m 2090,2378 v -333 l -31,-55 c -25,-46 -28,-58 -18,-76 14,-27 124,-110 197,-149 l 52,-28 v -122 -122 l -76,-48 c -98,-62 -176,-134 -222,-204 l -37,-56 -3,-317 c -3,-300 -2,-318 15,-319 17,-1 190,-1 226,0 16,1 17,21 17,271 0,235 2,274 17,296 23,36 123,104 236,159 l 97,48 -2,289 -3,289 -60,27 c -102,46 -195,102 -241,146 l -44,43 v 296 297 h -60 -60 z"
        />
      </g>
    </g>
  </svg>

  <span class="text-white">Adaptor Tool</span>
</div>

          <!-- Sidebar component, swap this element with another sidebar if you like -->
          <div class="h-0 flex-1 flex flex-col overflow-y-auto">
            <!-- Navigation -->
            <nav class="mt-2 flex-1 px-2 bg-gray-800">
              <h3
                class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                id="teams-headline"
              >
                User guide
              </h3>
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../QuickStart/"
                >Quick start</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../BuildingLibrary/"
                >Building the library</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../IntroductionToProfiles/"
                >Introduction to profiles</a
              > 
              <h3
                class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                id="teams-headline"
              >
                Developer guide
              </h3>
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../DeveloperGuide/ArchitectureOverview/"
                >Architecture Overview</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../DeveloperGuide/WritingComponent/"
                >Writing a Component</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../DeveloperGuide/ConfigurationLibrary/"
                >Configuration Library</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../DeveloperGuide/WritingRuleTests/"
                >Rule based extensions</a
              > 
              <h3
                class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                id="teams-headline"
              >
                Api
              </h3>
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../Api/Classes/"
                >Classes</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../Api/Namespaces/"
                >Namespaces</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../Api/Modules/"
                >Modules</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../Api/Files/"
                >Files</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../Api/Pages/"
                >Pages</a
              > 
              <h3
                class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                id="teams-headline"
              >
                Contributing
              </h3>
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../DeveloperGuide/CodeQuality/"
                >Code quality</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../DeveloperGuide/DeveloperFAQ/"
                >Developer FAQ</a
              > 
            </nav>
          </div>
        </div>
      </div>

      <!-- Main column -->
      <div class="flex flex-col w-0 flex-1 overflow-hidden">
        <!-- Top bar -->
        <div
          class="relative z-20 flex-shrink-0 flex h-16 bg-white border-b border-gray-200 focus:outline-none"
        >
          <button
            class="px-4 border-r border-gray-200 text-gray-400 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-cyan-500 lg:hidden"
            id="sidebarOpen"
          >
            <span class="sr-only">Open sidebar</span>
            <!-- Heroicon name: menu-alt-1 -->
            <svg
              class="h-6 w-6"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h8m-8 6h16"
              />
            </svg>
          </button>

          <div
            class="flex-1 px-4 flex justify-between sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8"
          >
            <div class="flex-1 flex">
              <form class="w-full flex md:ml-0" action="#" method="GET">
                <label for="mkdocs-search-query" class="sr-only">Search</label>
                <div
                  class="relative w-full text-gray-400 focus-within:text-gray-600"
                >
                  <div
                    class="absolute inset-y-0 left-0 flex items-center pointer-events-none"
                    aria-hidden="true"
                  >
                    <!-- Heroicon name: search -->
                    <svg
                      class="h-5 w-5"
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      aria-hidden="true"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </div>
                  <input
                    id="mkdocs-search-query"
                    name="mkdocs-search-query"
                    class="block w-full h-full pl-8 pr-3 py-2 border-transparent text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0 focus:border-transparent sm:text-sm"
                    placeholder="Search documentation"
                    type="search"
                  />
                </div>
              </form>
              <div
                id="searchResults"
                class="fixed sm:absolute mt-16 z-10 inset-0 overflow-y-auto min-h-screen min-w-screen flex flex-col justify-start sm:pb-16 lg:pb-96 lg:max-w-6xl lg:mx-auto hidden"
              >
                <div class="bg-gray-100 text-gray-400 p-2">Results</div>
                <div
                  class="bg-white min-h-96 z-100 p-4 sm:p-8 rounded-b space-y-4 flex flex-col overflow-y-auto w-full max-h-full"
                >
                  <div class="prose" id="mkdocs-search-results"></div>
                </div>
              </div>
            </div>
            
          </div>
        </div>

        <main
          class="relative flex flex-col flex-grow h-0 min-h-full justify-between bg-white focus:outline-none overflow-y-auto scrollbar-thumb-blue scrollbar-thumb-rounded scrollbar-track-blue-lighter scrollbar-w-2 scrolling-touch"
          tabindex="0"
        >
          <div
            class="fixed inset-0 transition-opacity hidden searchOverlayElement"
            aria-hidden="true"
            id="searchOverlay"
          >
            <div
              class="absolute inset-0 bg-gray-500 opacity-75 searchOverlayElement"
            ></div>
          </div>

          <div
            class="lg:px-8 flex flex-col space-y-4 p-4 md:px-6 sm:px-8 w-full mb-96"
          >  

<div class="lg:max-w-6xl w-full lg:mx-auto px-4 sm:px-6 lg:px-8">
  <div class="text-lg max-w-prose mx-auto py-10">
    <h1>
      <span
        class="block text-base text-center text-qauntum-600 font-semibold tracking-wide uppercase"
      >
        Documentation for
      </span>
      <span
        class="mt-2 block text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl flex flex-row justify-center"
      >
        <span class="text-center"> Debugging an LLVM IR </span>
      </span>
    </h1>
    
  </div>
  <div class="mt-6 text-gray-500 mx-auto blog-lg blog"><h1 id="debugging-an-llvm-ir">Debugging an LLVM IR</h1>
<h2 id="quick-start-with-basic-example">Quick start with basic example</h2>
<p>Assuming that you have compiled <code>qat</code> and have its location in your <code>PATH</code>
environment variable, create a C++ file called <code>segfault.cpp</code> with following
contents:</p>
<pre><code class="language-c++">int main()
{
  int *ptr   = nullptr;
  ptr[10299] = ptr[10299 * 2777] + 2;
  return ptr[99];
}
</code></pre>
<p>Then run following commands</p>
<pre><code class="language-sh">clang++ -O3 -c -S -emit-llvm segfault.cpp
qat -S segfault.ll &gt; with_debug.ll
mkdir -p bin
llc -filetype=obj -o bin/segfault.o with_debug.ll
clang++ -g -O1 bin/segfault.o -o bin/segfault
lldb bin/segfault
</code></pre>
<p>Running the program in <code>lldb</code> should now create a stack trace that refers to the
<code>segfault.ll</code> file rather than the original <code>segfault.cpp</code> file:</p>
<pre><code class="language-lldb">(lldb) target create &quot;bin/segfault&quot;
Current executable set to '/path/to/test/bin/segfault' (x86_64).
(lldb) r
Process 25334 launched: '/path/to/test/bin/segfault' (x86_64)
Process 25334 stopped
* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x6d1a00c)
    frame #0: 0x0000000100003f60 segfault`main at segfault.ll:8:74
   5
   6    ; Function Attrs: nofree norecurse nounwind ssp uwtable
   7    define i32 @main() local_unnamed_addr #0 {
-&gt; 8      %1 = load i32, i32* inttoptr (i64 114401292 to i32*), align 4, !tbaa !3
   9      %2 = add nsw i32 %1, 2
   10     store i32 %2, i32* inttoptr (i64 41196 to i32*), align 4, !tbaa !3
   11     %3 = load i32, i32* inttoptr (i64 396 to i32*), align 4, !tbaa !3
</code></pre>
<h2 id="detailed-basic-example">Detailed basic example</h2>
<p>In this example, we generate a simple program that will cause a segmentation
fault. The main program</p>
<pre><code class="language-c++">int main()
{
  int *ptr   = nullptr;
  ptr[10299] = ptr[10299 * 2777] + 2;
  return ptr[99];
}
</code></pre>
<p>To generate the IR, we use <code>clang</code> with <code>-emit-llvm</code></p>
<pre><code class="language-sh">clang++ -O3 -c -S -emit-llvm segfault.cpp
</code></pre>
<p>which generates a file called <code>segfault.ll</code>. The main content of this file
should be similar to:</p>
<pre><code class="language-llvm">define i32 @main() local_unnamed_addr #0 {
  %1 = load i32, i32* inttoptr (i64 114401292 to i32*), align 4, !tbaa !3
  %2 = add nsw i32 %1, 2
  store i32 %2, i32* inttoptr (i64 41196 to i32*), align 4, !tbaa !3
  %3 = load i32, i32* inttoptr (i64 396 to i32*), align 4, !tbaa !3
  ret i32 %3
}
</code></pre>
<p>We would expect that the program would segfault at the line starting with <code>%1</code>
as we have not allocated any memory. To create an IR with debug information, we
use <code>qat</code> as follows:</p>
<pre><code class="language-sh">qat -S --add-ir-debug segfault.ll &gt; segfault.dbg.ll
</code></pre>
<p>This command will add debug information referring to the original <code>segfault.ll</code>
places where no debug information is present. In case that the <code>.ll</code> file
already have debug information, we can strip that using <code>--strip-existing-dbg</code>:</p>
<pre><code class="language-sh">qat -S --strip-existing-dbg --add-ir-debug segfault.ll &gt; segfault.dbg.ll
</code></pre>
<p>Next we transform the new <code>.ll</code> file into an executable:</p>
<pre><code class="language-sh">mkdir -p bin
llc -filetype=obj -o bin/segfault.o segfault.dbg.ll
clang++ -g -O1 bin/segfault.o -o bin/segfault
</code></pre>
<p>Running this program in <code>lldb</code>, we will now get stack traces that refer to the
<code>.ll</code> file rather than than <code>.cpp</code> file:</p>
<pre><code class="language-lldb">% lldb bin/segfault
(lldb) target create &quot;bin/segfault&quot;
Current executable set to '/path/to/test/bin/segfault' (x86_64).
(lldb) r
Process 25334 launched: '/path/to/test/bin/segfault' (x86_64)
Process 25334 stopped
* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x6d1a00c)
    frame #0: 0x0000000100003f60 segfault`main at segfault.ll:8:74
   5
   6    ; Function Attrs: nofree norecurse nounwind ssp uwtable
   7    define i32 @main() local_unnamed_addr #0 {
-&gt; 8      %1 = load i32, i32* inttoptr (i64 114401292 to i32*), align 4, !tbaa !3
   9      %2 = add nsw i32 %1, 2
   10     store i32 %2, i32* inttoptr (i64 41196 to i32*), align 4, !tbaa !3
   11     %3 = load i32, i32* inttoptr (i64 396 to i32*), align 4, !tbaa !3
</code></pre>
<p>In this way, we can now trace the origin of an issue to the LLVM IR rather than
the original source file.</p>
<h2 id="mixing-ir-with-runtime">Mixing IR with runtime</h2>
<p>In this section we consider a slightly more complicated example where we want to
debug an IR combined with a runtime. Our runtime looks as follows:</p>
<pre><code class="language-c++">int foo();
int ir_recurse(int);

int standard_recurse(int n)
{
  if (n &lt;= 0)
  {
    return foo();
  }
  return ir_recurse(n - 1);
}

int main()
{
  int x = 2;
  return standard_recurse(20) + 2 * x;
}
</code></pre>
<p>As in the previous example, our IR will produce a segmentation fault. To ensure
that we get a stack trace containing traces of both the runtime and the IR, we
use a recursive function that alternates between using functionality in the
runtime and the main IR itself:</p>
<pre><code class="language-c++">int standard_recurse(int);

int foo()
{
  int *ptr   = nullptr;
  ptr[10299] = ptr[10299 * 2777] + 2;
  return ptr[99];
}

int ir_recurse(int n)
{
  if (n &lt;= 0)
  {
    return foo();
  }
  return standard_recurse(n - 1);
}
</code></pre>
<p>As in the previous example, we annotate <code>foo.ll</code> with debug information using
QAT before creating the object file and linking:</p>
<pre><code class="language-sh">  clang++ -c -g -o bin/runtime.o runtime.cpp
  clang++ -c -S -emit-llvm foo.cpp
  qat -S --add-ir-debug  foo.ll  &gt; foo.dbg.ll
  mkdir -p bin
  llc -filetype=obj -o bin/foo.dbg.o foo.dbg.ll
  clang++ -g bin/foo.dbg.o bin/runtime.o -o bin/qir_program
</code></pre>
<p>Running the debugger, we can now execute the program and produce a stack trace
as in the previous examples:</p>
<pre><code class="language-lldb">Current executable set to '/path/to/test/bin/qir_program' (x86_64).
(lldb) r
Process 54371 launched: '/path/to/test/bin/qir_program' (x86_64)
Process 54371 stopped
* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x6d1a00c)
    frame #0: 0x0000000100003e89 qir_program`_Z3foov at foo.ll:12:34
   9      store i32* null, i32** %1, align 8
   10     %2 = load i32*, i32** %1, align 8
   11     %3 = getelementptr inbounds i32, i32* %2, i64 28600323
-&gt; 12     %4 = load i32, i32* %3, align 4
   13     %5 = add nsw i32 %4, 2
   14     %6 = load i32*, i32** %1, align 8
   15     %7 = getelementptr inbounds i32, i32* %6, i64 10299
(lldb) bt
* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x6d1a00c)
  * frame #0: 0x0000000100003e89 qir_program`_Z3foov at foo.ll:12:34
    frame #1: 0x0000000100003efa qir_program`standard_recurse(n=0) at runtime.cpp:9:12
    frame #2: 0x0000000100003ecb qir_program`_Z10ir_recursei at foo.ll:40:49
    frame #3: 0x0000000100003f0f qir_program`standard_recurse(n=2) at runtime.cpp:11:10
    frame #4: 0x0000000100003ecb qir_program`_Z10ir_recursei at foo.ll:40:49
    frame #5: 0x0000000100003f0f qir_program`standard_recurse(n=4) at runtime.cpp:11:10
    frame #6: 0x0000000100003ecb qir_program`_Z10ir_recursei at foo.ll:40:49
    frame #7: 0x0000000100003f0f qir_program`standard_recurse(n=6) at runtime.cpp:11:10
    frame #8: 0x0000000100003ecb qir_program`_Z10ir_recursei at foo.ll:40:49
    frame #9: 0x0000000100003f0f qir_program`standard_recurse(n=8) at runtime.cpp:11:10
    frame #10: 0x0000000100003ecb qir_program`_Z10ir_recursei at foo.ll:40:49
    frame #11: 0x0000000100003f0f qir_program`standard_recurse(n=10) at runtime.cpp:11:10
    frame #12: 0x0000000100003ecb qir_program`_Z10ir_recursei at foo.ll:40:49
    frame #13: 0x0000000100003f0f qir_program`standard_recurse(n=12) at runtime.cpp:11:10
    frame #14: 0x0000000100003ecb qir_program`_Z10ir_recursei at foo.ll:40:49
    frame #15: 0x0000000100003f0f qir_program`standard_recurse(n=14) at runtime.cpp:11:10
    frame #16: 0x0000000100003ecb qir_program`_Z10ir_recursei at foo.ll:40:49
    frame #17: 0x0000000100003f0f qir_program`standard_recurse(n=16) at runtime.cpp:11:10
    frame #18: 0x0000000100003ecb qir_program`_Z10ir_recursei at foo.ll:40:49
    frame #19: 0x0000000100003f0f qir_program`standard_recurse(n=18) at runtime.cpp:11:10
    frame #20: 0x0000000100003ecb qir_program`_Z10ir_recursei at foo.ll:40:49
    frame #21: 0x0000000100003f0f qir_program`standard_recurse(n=20) at runtime.cpp:11:10
    frame #22: 0x0000000100003f40 qir_program`main at runtime.cpp:17:10
    frame #23: 0x000000010000d51e dyld`start + 462
(lldb) f 1
frame #1: 0x0000000100003efa qir_program`standard_recurse(n=0) at runtime.cpp:9:12
   6    {
   7      if (n &lt;= 0)
   8      {
-&gt; 9        return foo();
   10     }
   11     return ir_recurse(n - 1);
   12   }
(lldb)
</code></pre>
<p>We note how this incorporates traces from both <code>runtime.cpp</code> and <code>foo.ll</code> with
exact line reference. In this way, it is possible to debug in a similar manner
to what we are used to from classical computing.</p>
<h2 id="multi-ir-projects">Multi-IR projects</h2>
<p>Occasionally, we may want combine multiple IRs to produce one debuggable
executable. We note that we can choose two paths: Either we link at the IR
level, or we link at the object level. Unfortunately, LLVM does not produce
adequate debug symbols when multiple compilation units are defined in the same
IR. Hence, if we wish to follow the path of the former, we first need to combine
the IRs and then add debug information with reference to the <em>one combined
file</em>:</p>
<pre><code class="language-sh">qat -S foo.ll bar.ll &gt; combined.ll
qat -S --strip-existing-dbg  --add-ir-debug combined.ll &gt; combined.dbg.ll
</code></pre>
<p>However, this approach looses the information about the location of the original
files <code>foo.ll</code> and <code>bar.ll</code>:</p>
<pre><code class="language-lldb">  * thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x6d1a00c)
  * frame #0: 0x0000000100003ec9 combined_example`_Z3foov at combined.ll:11:34
    frame #1: 0x0000000100003f2e combined_example`_Z16standard_recursei at combined.ll:57:37
    frame #2: 0x0000000100003f0b combined_example`_Z10ir_recursei at combined.ll:38:49
    frame #3: 0x0000000100003f3b combined_example`_Z16standard_recursei at combined.ll:64:53
    frame #4: 0x0000000100003f0b combined_example`_Z10ir_recursei at combined.ll:38:49
    frame #5: 0x0000000100003f3b combined_example`_Z16standard_recursei at combined.ll:64:53
    frame #6: 0x0000000100003f0b combined_example`_Z10ir_recursei at combined.ll:38:49
    frame #7: 0x0000000100003f3b combined_example`_Z16standard_recursei at combined.ll:64:53
    frame #8: 0x0000000100003f0b combined_example`_Z10ir_recursei at combined.ll:38:49
    frame #9: 0x0000000100003f3b combined_example`_Z16standard_recursei at combined.ll:64:53
    frame #10: 0x0000000100003f0b combined_example`_Z10ir_recursei at combined.ll:38:49
    frame #11: 0x0000000100003f3b combined_example`_Z16standard_recursei at combined.ll:64:53
    frame #12: 0x0000000100003f0b combined_example`_Z10ir_recursei at combined.ll:38:49
    frame #13: 0x0000000100003f3b combined_example`_Z16standard_recursei at combined.ll:64:53
    frame #14: 0x0000000100003f0b combined_example`_Z10ir_recursei at combined.ll:38:49
    frame #15: 0x0000000100003f3b combined_example`_Z16standard_recursei at combined.ll:64:53
    frame #16: 0x0000000100003f0b combined_example`_Z10ir_recursei at combined.ll:38:49
    frame #17: 0x0000000100003f3b combined_example`_Z16standard_recursei at combined.ll:64:53
    frame #18: 0x0000000100003f0b combined_example`_Z10ir_recursei at combined.ll:38:49
    frame #19: 0x0000000100003f3b combined_example`_Z16standard_recursei at combined.ll:64:53
    frame #20: 0x0000000100003f0b combined_example`_Z10ir_recursei at combined.ll:38:49
    frame #21: 0x0000000100003f3b combined_example`_Z16standard_recursei at combined.ll:64:53
    frame #22: 0x0000000100003f6a combined_example`main at combined.ll:82:57
    frame #23: 0x000000010000d51e dyld`start + 462
</code></pre>
<p>To keep information about the original files, we have to turn to the second
approach where we create separate object files. This will prevent some
optimisations such as inlining, but will ensure that we can trace locations in
the individual files:</p>
<pre><code class="language-sh">  clang++ -c -S -emit-llvm foo.cpp
  clang++ -c -S -emit-llvm bar.cpp
  ${QAT_BINARY} -S --add-ir-debug  foo.ll  &gt; foo.dbg.ll
  ${QAT_BINARY} -S --add-ir-debug  bar.ll  &gt; bar.dbg.ll
  mkdir -p bin
  llc -filetype=obj -o bin/foo.dbg.o foo.dbg.ll
  llc -filetype=obj -o bin/bar.dbg.o bar.dbg.ll
  clang++ -g bin/foo.dbg.o bin/bar.dbg.o -o bin/foo_bar_example
</code></pre>
<p>The executable will now contain debug symbols referring to <code>foo.ll</code> and
<code>bar.ll</code>.</p></div>
</div>
          </div>
        </main>
      </div>
    </div>
    <script>
      var base_url = "../..",
          shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
    </script>
    <script src="../../js/base.js" defer></script>
    <script src="../../search/main.js" defer></script>  
  </body>
</html>
