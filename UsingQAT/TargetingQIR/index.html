<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
     
    <meta name="author" content="troels" />
     
    <link rel="canonical" href="https://qir-alliance.github.io/qat/UsingQAT/TargetingQIR/" />
     
    <link rel="shortcut icon" href="../../img/favicon.ico" />
    
    <title>
      Targeting a QIR - QAT Documentation
    </title>
    <link href="../../css/styles.css" rel="stylesheet" />
    <link href="../../css/font-awesome.min.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/monokai-sublime.min.css"
    />
    <link href="../../css/quantum-colors.css" rel="stylesheet" />

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/llvm.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script> 
  </head>

  <body>
    <div class="h-screen flex overflow-hidden bg-white">
      <!-- Off-canvas menu for mobile, show/hide based on off-canvas menu state. -->
      <div class="lg:hidden hidden" id="sidebar">
        <div class="fixed inset-0 flex z-40">
          <!--
        Off-canvas menu overlay, show/hide based on off-canvas menu state.

        Entering: "transition-opacity ease-linear duration-300"
          From: "opacity-0"
          To: "opacity-100"
        Leaving: "transition-opacity ease-linear duration-300"
          From: "opacity-100"
          To: "opacity-0"
      -->
          <div class="fixed inset-0" aria-hidden="true">
            <div class="absolute inset-0 bg-gray-600 opacity-75"></div>
          </div>
          <!--
        Off-canvas menu, show/hide based on off-canvas menu state.

        Entering: "transition ease-in-out duration-300 transform"
          From: "-translate-x-full"
          To: "translate-x-0"
        Leaving: "transition ease-in-out duration-300 transform"
          From: "translate-x-0"
          To: "-translate-x-full"
      -->
          <div
            class="relative flex-1 flex flex-col max-w-xs w-full pt-5 pb-4 bg-gray-800"
          >
            <div class="absolute top-0 right-0 -mr-12 pt-2">
              <button
                class="ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
                id="sidebarClose"
              >
                <span class="sr-only">Close sidebar</span>
                <!-- Heroicon name: x -->
                <svg
                  class="h-6 w-6 text-white"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  aria-hidden="true"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M6 18L18 6M6 6l12 12"
                  />
                </svg>
              </button>
            </div>
            <div class="flex flex-col justify-center items-center flex-shrink-0 px-4">
  <svg
    class="h-16 w-16"
    id="outputsvg"
    width="302.20001"
    height="292.73355"
    viewBox="0 0 3022.0001 2927.3355"
    version="1.1"
    sodipodi:docname="93013746.svg"
    xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
    xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:svg="http://www.w3.org/2000/svg"
  >
    <defs id="defs40" />
    <sodipodi:namedview
      id="namedview38"
      pagecolor="#ffffff"
      bordercolor="#666666"
      borderopacity="1.0"
      showgrid="false"
      fit-margin-top="0"
      fit-margin-left="0"
      fit-margin-right="0"
      fit-margin-bottom="0"
    />
    <g
      id="l3qWAVepmhNjXiGFCK8Ygm8"
      fill="#ffffff"
      transform="translate(-510,-500.49862)"
    >
      <g id="g26">
        <path
          id="powjCKlys"
          d="M 890,2694 C 709,2646 609,2553 549,2375 l -24,-70 V 1605 905 l 27,-72 c 30,-83 86,-171 130,-208 16,-14 68,-44 114,-66 109,-53 228,-69 391,-52 92,9 120,16 186,49 103,49 166,107 204,186 58,119 65,152 71,326 4,133 7,162 18,158 10,-4 14,2 14,19 0,21 -13,30 -85,65 l -85,41 v 263 264 l 28,7 c 15,4 52,19 82,33 44,22 56,33 58,55 3,21 0,26 -12,21 -14,-5 -16,10 -16,127 0,211 -28,301 -115,378 -20,18 -36,34 -34,36 2,2 45,9 94,17 l 90,13 3,73 3,72 -373,-1 c -295,0 -385,-3 -428,-15 z m 327,-275 c 46,-26 87,-82 106,-144 9,-30 12,-201 12,-665 0,-592 -1,-628 -19,-684 -35,-105 -112,-158 -230,-157 -118,0 -203,62 -237,171 -19,63 -19,92 -17,690 l 3,625 26,56 c 28,59 76,105 131,126 54,21 175,11 225,-18 z"
        />
        <path
          id="pXDrvybHy"
          d="m 2410,2340 c 0,-333 -2,-369 -16,-363 -12,4 -15,0 -12,-18 3,-24 15,-32 101,-69 l 47,-21 v -259 -259 l -75,-35 c -64,-30 -75,-38 -75,-60 0,-18 4,-24 15,-20 13,5 15,-36 15,-340 V 550 h 378 c 427,0 466,5 559,67 70,46 125,130 150,227 15,58 18,111 18,296 0,252 -9,305 -65,376 -36,45 -132,112 -172,121 -34,7 -37,23 -5,23 12,1 47,13 77,29 63,31 122,101 140,165 7,25 15,180 20,400 5,197 11,380 15,407 l 7,49 h -155 -155 l -6,-32 c -3,-18 -8,-190 -11,-383 -8,-429 -12,-446 -120,-496 -34,-16 -66,-19 -207,-19 h -168 v 465 465 h -150 -150 z m 695,-864 c 28,-8 48,-24 70,-55 l 30,-43 v -201 c 0,-349 -25,-377 -337,-377 h -158 v 345 345 l 178,-1 c 106,0 193,-5 217,-13 z"
        />
      </g>
    </g>
    <g
      id="l6geLyeKy0gshdvsOIcFawK"
      fill="#14775d"
      transform="translate(-510,-500.49862)"
    >
      <g id="g30">
        <path
          id="pFwHav8Wh"
          d="m 1830,2411 v -299 l -46,-38 c -78,-65 -217,-144 -281,-160 l -23,-6 v -293 -293 l 103,-52 c 57,-28 134,-75 173,-104 l 69,-53 3,-281 2,-282 h 38 c 20,0 61,-3 90,-6 48,-6 52,-5 52,15 0,12 -6,21 -15,21 -13,0 -15,38 -15,278 0,261 1,279 20,312 11,19 28,52 38,72 9,20 25,39 35,42 12,3 17,14 17,36 0,29 -2,31 -17,19 -10,-7 -25,-22 -34,-33 -17,-19 -18,-19 -73,31 -61,56 -126,102 -187,134 l -40,20 3,122 3,122 45,24 c 25,14 78,50 119,80 41,31 82,62 93,70 16,12 21,11 41,-8 31,-28 37,-27 37,9 0,17 9,48 20,70 19,37 20,59 20,385 v 345 h -145 -145 z"
        />
      </g>
    </g>
    <g
      id="ls88IYZfP5b5b8x7RYseij"
      fill="#1cb78e"
      transform="translate(-510,-500.49862)"
    >
      <g id="g34">
        <path
          id="pCM7FVo6B"
          d="m 2090,2378 v -333 l -31,-55 c -25,-46 -28,-58 -18,-76 14,-27 124,-110 197,-149 l 52,-28 v -122 -122 l -76,-48 c -98,-62 -176,-134 -222,-204 l -37,-56 -3,-317 c -3,-300 -2,-318 15,-319 17,-1 190,-1 226,0 16,1 17,21 17,271 0,235 2,274 17,296 23,36 123,104 236,159 l 97,48 -2,289 -3,289 -60,27 c -102,46 -195,102 -241,146 l -44,43 v 296 297 h -60 -60 z"
        />
      </g>
    </g>
  </svg>

  <span class="text-white">Adaptor Tool</span>
</div>
            <div class="mt-5 flex-1 h-0 overflow-y-auto">
              <nav class="px-2">
                <h3
                  class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                  id="teams-headline"
                >
                  Quick start
                </h3>
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../QuickStart/"
                  >Quick start</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../QuickStart/building-with-bazel/"
                  >Building with Bazel</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../QuickStart/building-with-cmake/"
                  >Building with CMake</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../QuickStart/running-qat/"
                  >Running QAT</a
                > 
                <h3
                  class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                  id="teams-headline"
                >
                  Using QAT
                </h3>
                <a
                  class="bg-gray-900 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="./"
                  >Targeting a QIR</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../DebuggingIR/"
                  >Debugging a QIR</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../GoalsAndAssumptions/"
                  >Assumptions and restrictions</a
                > 
                <h3
                  class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                  id="teams-headline"
                >
                  Developer guide
                </h3>
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../DeveloperGuide/ArchitectureOverview/"
                  >Architecture Overview</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../DeveloperGuide/WritingAdaptor/"
                  >Writing an adaptor</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../DeveloperGuide/WritingRuleTests/"
                  >Rule based extensions</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../DeveloperGuide/LogicSeparation/"
                  >Grouping QIS</a
                > 
                <h3
                  class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                  id="teams-headline"
                >
                  Api
                </h3>
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../Api/Classes/"
                  >Classes</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../Api/Namespaces/"
                  >Namespaces</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../Api/Modules/"
                  >Modules</a
                > 
                <h3
                  class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                  id="teams-headline"
                >
                  Contributing
                </h3>
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../DeveloperGuide/CodeQuality/"
                  >Code quality</a
                >
                <a
                  class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                  href="../../DeveloperGuide/DeveloperFAQ/"
                  >Developer FAQ</a
                > 
              </nav>
            </div>
          </div>
          <div class="flex-shrink-0 w-14" aria-hidden="true">
            <!-- Dummy element to force sidebar to shrink to fit close icon -->
          </div>
        </div>
      </div>

      <!-- Static sidebar for desktop -->
      <div class="hidden lg:flex lg:flex-shrink-0">
        <div
          class="flex flex-col w-64 border-r border-gray-200 pt-5 pb-4 bg-gray-800"
        >
          <div class="flex flex-col justify-center items-center flex-shrink-0 px-4">
  <svg
    class="h-16 w-16"
    id="outputsvg"
    width="302.20001"
    height="292.73355"
    viewBox="0 0 3022.0001 2927.3355"
    version="1.1"
    sodipodi:docname="93013746.svg"
    xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
    xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:svg="http://www.w3.org/2000/svg"
  >
    <defs id="defs40" />
    <sodipodi:namedview
      id="namedview38"
      pagecolor="#ffffff"
      bordercolor="#666666"
      borderopacity="1.0"
      showgrid="false"
      fit-margin-top="0"
      fit-margin-left="0"
      fit-margin-right="0"
      fit-margin-bottom="0"
    />
    <g
      id="l3qWAVepmhNjXiGFCK8Ygm8"
      fill="#ffffff"
      transform="translate(-510,-500.49862)"
    >
      <g id="g26">
        <path
          id="powjCKlys"
          d="M 890,2694 C 709,2646 609,2553 549,2375 l -24,-70 V 1605 905 l 27,-72 c 30,-83 86,-171 130,-208 16,-14 68,-44 114,-66 109,-53 228,-69 391,-52 92,9 120,16 186,49 103,49 166,107 204,186 58,119 65,152 71,326 4,133 7,162 18,158 10,-4 14,2 14,19 0,21 -13,30 -85,65 l -85,41 v 263 264 l 28,7 c 15,4 52,19 82,33 44,22 56,33 58,55 3,21 0,26 -12,21 -14,-5 -16,10 -16,127 0,211 -28,301 -115,378 -20,18 -36,34 -34,36 2,2 45,9 94,17 l 90,13 3,73 3,72 -373,-1 c -295,0 -385,-3 -428,-15 z m 327,-275 c 46,-26 87,-82 106,-144 9,-30 12,-201 12,-665 0,-592 -1,-628 -19,-684 -35,-105 -112,-158 -230,-157 -118,0 -203,62 -237,171 -19,63 -19,92 -17,690 l 3,625 26,56 c 28,59 76,105 131,126 54,21 175,11 225,-18 z"
        />
        <path
          id="pXDrvybHy"
          d="m 2410,2340 c 0,-333 -2,-369 -16,-363 -12,4 -15,0 -12,-18 3,-24 15,-32 101,-69 l 47,-21 v -259 -259 l -75,-35 c -64,-30 -75,-38 -75,-60 0,-18 4,-24 15,-20 13,5 15,-36 15,-340 V 550 h 378 c 427,0 466,5 559,67 70,46 125,130 150,227 15,58 18,111 18,296 0,252 -9,305 -65,376 -36,45 -132,112 -172,121 -34,7 -37,23 -5,23 12,1 47,13 77,29 63,31 122,101 140,165 7,25 15,180 20,400 5,197 11,380 15,407 l 7,49 h -155 -155 l -6,-32 c -3,-18 -8,-190 -11,-383 -8,-429 -12,-446 -120,-496 -34,-16 -66,-19 -207,-19 h -168 v 465 465 h -150 -150 z m 695,-864 c 28,-8 48,-24 70,-55 l 30,-43 v -201 c 0,-349 -25,-377 -337,-377 h -158 v 345 345 l 178,-1 c 106,0 193,-5 217,-13 z"
        />
      </g>
    </g>
    <g
      id="l6geLyeKy0gshdvsOIcFawK"
      fill="#14775d"
      transform="translate(-510,-500.49862)"
    >
      <g id="g30">
        <path
          id="pFwHav8Wh"
          d="m 1830,2411 v -299 l -46,-38 c -78,-65 -217,-144 -281,-160 l -23,-6 v -293 -293 l 103,-52 c 57,-28 134,-75 173,-104 l 69,-53 3,-281 2,-282 h 38 c 20,0 61,-3 90,-6 48,-6 52,-5 52,15 0,12 -6,21 -15,21 -13,0 -15,38 -15,278 0,261 1,279 20,312 11,19 28,52 38,72 9,20 25,39 35,42 12,3 17,14 17,36 0,29 -2,31 -17,19 -10,-7 -25,-22 -34,-33 -17,-19 -18,-19 -73,31 -61,56 -126,102 -187,134 l -40,20 3,122 3,122 45,24 c 25,14 78,50 119,80 41,31 82,62 93,70 16,12 21,11 41,-8 31,-28 37,-27 37,9 0,17 9,48 20,70 19,37 20,59 20,385 v 345 h -145 -145 z"
        />
      </g>
    </g>
    <g
      id="ls88IYZfP5b5b8x7RYseij"
      fill="#1cb78e"
      transform="translate(-510,-500.49862)"
    >
      <g id="g34">
        <path
          id="pCM7FVo6B"
          d="m 2090,2378 v -333 l -31,-55 c -25,-46 -28,-58 -18,-76 14,-27 124,-110 197,-149 l 52,-28 v -122 -122 l -76,-48 c -98,-62 -176,-134 -222,-204 l -37,-56 -3,-317 c -3,-300 -2,-318 15,-319 17,-1 190,-1 226,0 16,1 17,21 17,271 0,235 2,274 17,296 23,36 123,104 236,159 l 97,48 -2,289 -3,289 -60,27 c -102,46 -195,102 -241,146 l -44,43 v 296 297 h -60 -60 z"
        />
      </g>
    </g>
  </svg>

  <span class="text-white">Adaptor Tool</span>
</div>

          <!-- Sidebar component, swap this element with another sidebar if you like -->
          <div class="h-0 flex-1 flex flex-col overflow-y-auto">
            <!-- Navigation -->
            <nav class="mt-2 flex-1 px-2 bg-gray-800">
              <h3
                class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                id="teams-headline"
              >
                Quick start
              </h3>
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../QuickStart/"
                >Quick start</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../QuickStart/building-with-bazel/"
                >Building with Bazel</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../QuickStart/building-with-cmake/"
                >Building with CMake</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../QuickStart/running-qat/"
                >Running QAT</a
              > 
              <h3
                class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                id="teams-headline"
              >
                Using QAT
              </h3>
              <a
                class="bg-gray-900 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="./"
                >Targeting a QIR</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../DebuggingIR/"
                >Debugging a QIR</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../GoalsAndAssumptions/"
                >Assumptions and restrictions</a
              > 
              <h3
                class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                id="teams-headline"
              >
                Developer guide
              </h3>
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../DeveloperGuide/ArchitectureOverview/"
                >Architecture Overview</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../DeveloperGuide/WritingAdaptor/"
                >Writing an adaptor</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../DeveloperGuide/WritingRuleTests/"
                >Rule based extensions</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../DeveloperGuide/LogicSeparation/"
                >Grouping QIS</a
              > 
              <h3
                class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                id="teams-headline"
              >
                Api
              </h3>
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../Api/Classes/"
                >Classes</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../Api/Namespaces/"
                >Namespaces</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../Api/Modules/"
                >Modules</a
              > 
              <h3
                class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-1"
                id="teams-headline"
              >
                Contributing
              </h3>
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../DeveloperGuide/CodeQuality/"
                >Code quality</a
              >
              <a
                class=" hover:bg-gray-700 text-gray-300 hover:text-white group flex items-center px-2 py-4 text-sm font-medium rounded"
                href="../../DeveloperGuide/DeveloperFAQ/"
                >Developer FAQ</a
              > 
            </nav>
          </div>
        </div>
      </div>

      <!-- Main column -->
      <div class="flex flex-col w-0 flex-1 overflow-hidden">
        <!-- Top bar -->
        <div
          class="relative z-20 flex-shrink-0 flex h-16 bg-white border-b border-gray-200 focus:outline-none"
        >
          <button
            class="px-4 border-r border-gray-200 text-gray-400 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-cyan-500 lg:hidden"
            id="sidebarOpen"
          >
            <span class="sr-only">Open sidebar</span>
            <!-- Heroicon name: menu-alt-1 -->
            <svg
              class="h-6 w-6"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h8m-8 6h16"
              />
            </svg>
          </button>

          <div
            class="flex-1 px-4 flex justify-between sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8"
          >
            <div class="flex-1 flex">
              <form class="w-full flex md:ml-0" action="#" method="GET">
                <label for="mkdocs-search-query" class="sr-only">Search</label>
                <div
                  class="relative w-full text-gray-400 focus-within:text-gray-600"
                >
                  <div
                    class="absolute inset-y-0 left-0 flex items-center pointer-events-none"
                    aria-hidden="true"
                  >
                    <!-- Heroicon name: search -->
                    <svg
                      class="h-5 w-5"
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      aria-hidden="true"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </div>
                  <input
                    id="mkdocs-search-query"
                    name="mkdocs-search-query"
                    class="block w-full h-full pl-8 pr-3 py-2 border-transparent text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0 focus:border-transparent sm:text-sm"
                    placeholder="Search documentation"
                    type="search"
                  />
                </div>
              </form>
              <div
                id="searchResults"
                class="fixed sm:absolute mt-16 z-10 inset-0 overflow-y-auto min-h-screen min-w-screen flex flex-col justify-start sm:pb-16 lg:pb-96 lg:max-w-6xl lg:mx-auto hidden"
              >
                <div class="bg-gray-100 text-gray-400 p-2">Results</div>
                <div
                  class="bg-white min-h-96 z-100 p-4 sm:p-8 rounded-b space-y-4 flex flex-col overflow-y-auto w-full max-h-full"
                >
                  <div class="prose" id="mkdocs-search-results"></div>
                </div>
              </div>
            </div>
            
          </div>
        </div>

        <main
          class="relative flex flex-col flex-grow h-0 min-h-full justify-between bg-white focus:outline-none overflow-y-auto scrollbar-thumb-blue scrollbar-thumb-rounded scrollbar-track-blue-lighter scrollbar-w-2 scrolling-touch"
          tabindex="0"
        >
          <div
            class="fixed inset-0 transition-opacity hidden searchOverlayElement"
            aria-hidden="true"
            id="searchOverlay"
          >
            <div
              class="absolute inset-0 bg-gray-500 opacity-75 searchOverlayElement"
            ></div>
          </div>

          <div
            class="lg:px-8 flex flex-col space-y-4 p-4 md:px-6 sm:px-8 w-full mb-96"
          >  

<div class="lg:max-w-6xl w-full lg:mx-auto px-4 sm:px-6 lg:px-8">
  <div class="text-lg max-w-prose mx-auto py-10">
    <h1>
      <span
        class="block text-base text-center text-qauntum-600 font-semibold tracking-wide uppercase"
      >
        Using QAT
      </span>
      <span
        class="mt-2 block text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl flex flex-row justify-center"
      >
        <span class="text-center"> Targeting a QIR </span>
      </span>
    </h1>
    
  </div>
  <div class="mt-6 text-gray-500 mx-auto blog-lg blog"><h1 id="targeting-qir">Targeting QIR</h1>
<h2 id="qat-configuration">QAT Configuration</h2>
<p>QAT has some high level configuration that dictates what tasks QAT should do and
how it should do it. For instance, the QAT configuration will determine whether
or not QAT will adapt the QIR to become compliant with a target QIR, what the
adaptor pipeline looks like and whether or not it should validate target
compliance afterwards.</p>
<p>Below we list all settings that are used to configure how QAT is running:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>apply</td>
<td>Applies a adaptor to transform the IR in correspondence with the adaptor.</td>
<td>false</td>
</tr>
<tr>
<td>validate</td>
<td>Executes the validation procedure.</td>
<td>false</td>
</tr>
<tr>
<td>adaptor-pipeline</td>
<td>Overrides the adaptor pipeline.</td>
<td></td>
</tr>
<tr>
<td>emit-human-readable-llvm</td>
<td>Emits LLVM IR to the standard output.</td>
<td>false</td>
</tr>
<tr>
<td>target-def</td>
<td>YAML file containing the definition for the target.</td>
<td></td>
</tr>
<tr>
<td>save-config</td>
<td>YAML file to which the config will be save.</td>
<td></td>
</tr>
<tr>
<td>verify-module</td>
<td>Verifies the module after transformation.</td>
<td>false</td>
</tr>
<tr>
<td>experimental</td>
<td>Enables experimental features.</td>
<td>false</td>
</tr>
<tr>
<td>dump-config</td>
<td>Prints the configuration to the standard output.</td>
<td>false</td>
</tr>
<tr>
<td>add-ir-debug</td>
<td>Annotates the IR with debug information.</td>
<td>false</td>
</tr>
<tr>
<td>strip-existing-dbg</td>
<td>Strips existing debug symbols.</td>
<td>false</td>
</tr>
<tr>
<td>output</td>
<td>Output file. If empty, the output is sent to stdout.</td>
<td></td>
</tr>
<tr>
<td>save-logs</td>
<td>Saves the logs report to specified filename in JSON format.</td>
<td></td>
</tr>
<tr>
<td>version</td>
<td>Shows the version of QAT.</td>
<td>false</td>
</tr>
<tr>
<td>help</td>
<td>Show help page.</td>
<td>false</td>
</tr>
</tbody>
</table>
<p>The flags <code>apply</code> and <code>validate</code> are used to specify whether QAT should apply
adaptors and validate the resulting QIR, respectively. These flags can be
applied independently of one and another. Hence, it is possible to validate a
QIR without first transforming it as well as transforming it without the need of
validating it.</p>
<p>The QIR transformation process is dictated by the <code>adapator-pipeline</code> which
determines which adaptors QAT will use and in which order. The default pipeline
is <code>replacement-linking</code>, <code>llvm-optimization</code>,
<code>remove-non-entrypoint-functions</code>, <code>target-qis-mapping</code>,
<code>target-profile-mapping</code>, <code>straightline-code-requirement</code>, <code>static-resources</code>,
<code>grouping</code>. Each of these adaptors are discussed in detail below.</p>
<p>The parameter <code>target-def</code> is used to load configuration of QAT including all
adaptors and validations settings. This parameter is usful to create definitions
that can be used to target specific hardware without the need of providing an
exhaustive list of commandline arguments.</p>
<h2 id="validating-a-qir">Validating a QIR</h2>
<p>Validating the QIR consists of two separate tasks: Validating that the QIR is
compliant with the profile specification and validating that the QIR only uses
the specified quantum instruction set.</p>
<h3 id="target-profile-validation-configuration-for-profile-validation">Target profile validation - Configuration for profile validation</h3>
<p>Profile validation consists of confirming the compliance with required classical
behaviour. This includes options to define specific behaviours such as which
types are allowed, externally callable functions and use of poison and undef:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default value</th>
<th>CLI</th>
</tr>
</thead>
<tbody>
<tr>
<td>allow-internal-calls</td>
<td>Whether or not internal calls are allowed.</td>
<td>true</td>
<td>Yes</td>
</tr>
<tr>
<td>allow-poison</td>
<td>Whether or not poison values are allowed.</td>
<td>true</td>
<td>Yes</td>
</tr>
<tr>
<td>allow-undef</td>
<td>Whether or not undef values are allowed.</td>
<td>true</td>
<td>Yes</td>
</tr>
<tr>
<td>opcodes</td>
<td>List of allowed opcodes</td>
<td></td>
<td>No</td>
</tr>
<tr>
<td>allowlist-opcodes</td>
<td>Whether or not to use allow list for op-codes.</td>
<td></td>
<td>No</td>
</tr>
<tr>
<td>allowlist-external-calls</td>
<td>Whether or not to use allow list external calls.</td>
<td></td>
<td>No</td>
</tr>
<tr>
<td>allowlist-pointer-types</td>
<td>Whether or not to use allow list pointer types.</td>
<td></td>
<td>No</td>
</tr>
<tr>
<td>allow-primitive-return</td>
<td>Whether or not primitive return types are allowed.</td>
<td></td>
<td>No</td>
</tr>
<tr>
<td>allow-struct-return</td>
<td>Whether or not struct return types are allowed.</td>
<td></td>
<td>No</td>
</tr>
<tr>
<td>allow-pointer-return</td>
<td>Whether or not pointer return types are allowed.</td>
<td></td>
<td>No</td>
</tr>
<tr>
<td>external-calls</td>
<td>Allowed external calls.</td>
<td></td>
<td>No</td>
</tr>
<tr>
<td>allowed-pointer-types</td>
<td>Allowed pointer types.</td>
<td></td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Not all of these are available through the CLI since they require a lot of data.
For instance, <code>opcodes</code> is only allowed to be specified through the config file,
since this is a list of objects.</p>
<h3 id="target-qis-validation-configuration-for-qis-validation">Target QIS validation - Configuration for QIS validation</h3>
<p>Similar to the target profile validation, the target QIS validation deals with
the validation of the quantum instruction set (QIS). Specifically, these
settings are used to specify whether or not we require qubits and/or results to
be present in the IR and whether we allow all QIS, or only those which were
allowed listed:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default value</th>
<th>CLI</th>
</tr>
</thead>
<tbody>
<tr>
<td>allowed-any-qis</td>
<td>Whether or not to allow any quantum instruction.</td>
<td>true</td>
<td>Yes</td>
</tr>
<tr>
<td>requires-qubits</td>
<td>Whether or not qubits are required in the IR.</td>
<td>false</td>
<td>Yes</td>
</tr>
<tr>
<td>requires-results</td>
<td>Whether or not results are required in the IR.</td>
<td>false</td>
<td>Yes</td>
</tr>
<tr>
<td>allowed-qis</td>
<td>List of allowed QIS signatures</td>
<td></td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Like the target profile validator, the <code>allowed-qis</code> is only available through
the configuration file.</p>
<h2 id="adaptors">Adaptors</h2>
<p>In this section we discuss configuration of the available adaptors.</p>
<h3 id="adaptor-deactivation-used-to-disable-or-enable-adaptors">Adaptor deactivation - Used to disable or enable adaptors</h3>
<p>This configuration section allows the user to disable one or more adaptors. By
default all adaptors are activated. While this does not mean that they actively
perform any transformation of the IR, it does mean that the adaptor code is
loaded and that the adaptor will be operating in accordance with its settings.</p>
<p>The indiidual adaptors that can be disabled are listed here:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>disable-replacement-linking</td>
<td>Disables Replacement linking.</td>
<td>false</td>
</tr>
<tr>
<td>disable-llvm-optimization</td>
<td>Disables LLVM optimizations.</td>
<td>false</td>
</tr>
<tr>
<td>disable-remove-non-entrypoint-functions</td>
<td>Disables Remove Non-Entrypoint Functions.</td>
<td>false</td>
</tr>
<tr>
<td>disable-target-qis-mapping</td>
<td>Disables Pass configuration.</td>
<td>false</td>
</tr>
<tr>
<td>disable-target-profile-mapping</td>
<td>Disables Post-transform optimisation.</td>
<td>false</td>
</tr>
<tr>
<td>disable-straightline-code-requirement</td>
<td>Disables Pre-transform validation.</td>
<td>false</td>
</tr>
<tr>
<td>disable-static-resources</td>
<td>Disables Static resource manipulation.</td>
<td>false</td>
</tr>
<tr>
<td>disable-grouping</td>
<td>Disables QIS Grouping.</td>
<td>false</td>
</tr>
</tbody>
</table>
<p>Note that some of these adaptors are not configurable. One such example is the
<code>remove-non-entrypoint-functions</code> which either is there or not. This particular
adaptor works is just a traditional LLVM pass, but is delivered as an adaptor
since QAT does not allow single passes to be added to the pipeline without an
adaptor to manage its configuration. Moreover, since the pass does not require
any configuration, its configuration section is empty.</p>
<h3 id="llvm-optimizations-enables-specific-llvm-optimizations-before-and-after-transformation">LLVM optimizations - Enables specific LLVM optimizations before and after transformation</h3>
<p>The LLVM optimization adaptor runs provides selected LLVM passes to perform
traditional optimization tasks such as function inlining, loop unrolling, dead
code elimination, memory elimination and constant elimination. For each of these
passes, we provide a number of parameters that allows tuning of the individual
passes to the extend possible:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>unroll-loops</td>
<td>Aggressively unroll loops.</td>
<td>false</td>
</tr>
<tr>
<td>allow-partial</td>
<td>Enables or disables partial unrolling. When disabled only full unrolling is allowed.</td>
<td>true</td>
</tr>
<tr>
<td>allow-peeling</td>
<td>Enables or disables loop peeling.</td>
<td>true</td>
</tr>
<tr>
<td>allow-runtime</td>
<td>Enables or disables unrolling of loops with runtime trip count.</td>
<td>true</td>
</tr>
<tr>
<td>allow-upper-bound</td>
<td>Enables or disables the use of trip count upper bound in loop unrolling.</td>
<td>true</td>
</tr>
<tr>
<td>allow-profile-based-peeling</td>
<td>Enables or disables loop peeling basing on profile.</td>
<td>true</td>
</tr>
<tr>
<td>full-unroll-count</td>
<td>Sets the max full unroll count.</td>
<td>1024</td>
</tr>
<tr>
<td>unroll-opt-level</td>
<td>Sets the optimization level for loop unrolling.</td>
<td>3</td>
</tr>
<tr>
<td>only-when-forced</td>
<td>If true, only loops that explicitly request unrolling via metadata are considered.</td>
<td>false</td>
</tr>
<tr>
<td>forget-scev</td>
<td>If true, forget all loops when unrolling. If false, forget top-most loop of the currently processed loops.</td>
<td>false</td>
</tr>
<tr>
<td>always-inline</td>
<td>Aggressively inline function calls.</td>
<td>false</td>
</tr>
<tr>
<td>inlining-parameter</td>
<td>Number of code lines acceptable when inlining.</td>
<td>2147483647</td>
</tr>
<tr>
<td>eliminate-constants</td>
<td>Uses LLVM pass to eliminate constants.</td>
<td>true</td>
</tr>
<tr>
<td>eliminate-dead-code</td>
<td>Uses LLVMs aggressive dead code elimination.</td>
<td>true</td>
</tr>
<tr>
<td>eliminate-memory</td>
<td>Maps memory into registers where feasible.</td>
<td>true</td>
</tr>
</tbody>
</table>
<p>The purpose of this adaptor is to simplify the IR as much as possible prior to
targeting the IR. While we have taken great care to ensure that these passes act
predictably, note that there may be occasions where they produce a different IR
than that desired. One such example is promoting if-else statements to switch
statements where applicable. This is not always desirable since not all backends
has support for this.</p>
<h3 id="target-qis-mapping-rules-used-to-transform-instruction-sequences-in-the-qir">Target QIS mapping - Rules used to transform instruction sequences in the QIR</h3>
<p>This adaptor transforms the QIR into a QIR that is targeted with respect to the
quantum instruction set. The adaptor provides a number of different
transformations including mapping dynamic qubit/result allocation into static
qubit/result allocation and optimize comparisons against constant quantum
results <code>Zero</code> and <code>One</code>:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>optimize-result-one</td>
<td>Maps branching based on quantum measurements compared to one to base adaptor type measurement.</td>
<td>true</td>
</tr>
<tr>
<td>optimize-result-zero</td>
<td>Maps branching based on quantum measurements compared to zero to base adaptor type measurement.</td>
<td>true</td>
</tr>
<tr>
<td>optimize-result-comparison</td>
<td>Maps branching based on quantum measurements compared to each other to base adaptor type measurement.</td>
<td>true</td>
</tr>
<tr>
<td>use-static-qubit-array-allocation</td>
<td>Maps allocation of qubit arrays to static array allocation.</td>
<td>true</td>
</tr>
<tr>
<td>use-static-qubit-allocation</td>
<td>Maps qubit allocation to static allocation.</td>
<td>true</td>
</tr>
<tr>
<td>use-static-result-allocation</td>
<td>Maps result allocation to static allocation.</td>
<td>true</td>
</tr>
<tr>
<td>disable-reference-counting</td>
<td>Disables reference counting by instruction removal.</td>
<td>true</td>
</tr>
<tr>
<td>disable-alias-counting</td>
<td>Disables alias counting by instruction removal.</td>
<td>true</td>
</tr>
<tr>
<td>disable-string-support</td>
<td>Disables string support by instruction removal.</td>
<td>true</td>
</tr>
<tr>
<td>disable-record-output-support</td>
<td>Disables record output support by instruction removal.</td>
<td>true</td>
</tr>
<tr>
<td>reuse-qubits</td>
<td>Use to define whether or not to reuse qubits.</td>
<td>false</td>
</tr>
<tr>
<td>reuse-results</td>
<td>Use to define whether or not to reuse results.</td>
<td>false</td>
</tr>
<tr>
<td>entry-point-attr</td>
<td>Specifies the attribute indicating the entry point.</td>
<td>EntryPoint</td>
</tr>
</tbody>
</table>
<p>It is worth noting that the mapping of dynamic qubits to static qubits is
limited in scope and done as a best-effort. The reason for this limitation is
that there exists scenarios in which this mapping simply is not possible. One
such example is a recursive function that allocates one qubit for every
recursion and terminates at runtime given depth <code>N</code>.</p>
<p>There are a number of experimental features in this adaptor. To list these use
<code>qat -h --experimental</code>.</p>
<h3 id="target-profile-mapping-optimisations-performed-after">Target profile mapping - Optimisations performed after</h3>
<p>Like target QIS mapping, the target profile mapping maps known IR patterns into
other patterns. This adaptor only uses LLVM passes at the moment, but could be
extended using our pattern matching pass to accommodate special requirements.
Options as the moment are:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>lower-switch</td>
<td>Lower switch statements.</td>
<td>true</td>
</tr>
<tr>
<td>should-eliminate-zext-i1</td>
<td>Replace zext instruction for i1 with select.</td>
<td>true</td>
</tr>
<tr>
<td>defer-measurements</td>
<td>Whether measurement and recording functions should be moved to the end of the program.</td>
<td>false</td>
</tr>
</tbody>
</table>
<p>We note that deferred measurements should be moved to the circuit separation
pass.</p>
<h3 id="replacement-linking-conditionally-replaces-function-calls">Replacement linking - Conditionally replaces function calls</h3>
<p>Replacement linking is an adaptor that enables replacement of functions subject
to the replacing function being present in the IR. As an example, imagine a
backend that implements an X gate but not a Z gate. A QIR that makes use of Z
gates would not run on said hardware unless we would map Z into the sequence HXH
where H is the Hadamard gate. The replacement linking adaptor allows us to
define a software implementation of Z in a separate library and use annotattions
on the Z gate function to replace the gate if a software implementation is
provided.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>replace-functions</td>
<td>Functions to be replaced.</td>
<td></td>
</tr>
<tr>
<td>remove-call-attributes</td>
<td>Discard all call attributes</td>
<td>false</td>
</tr>
</tbody>
</table>
<h3 id="static-resource-adaptor-manipulates-statically-allocated-qubits-and-results">Static resource adaptor - Manipulates statically allocated qubits and results</h3>
<p>In case of a QIR that uses statically allocated qubits and/or results, the
static resource adaptor allows manipulation to achieve certain properties. One
such property is enforcing consecutive indexing starting 0 and another is the
ability to ensure that a new qubit is used whenever a reset occurs. The latter
garantuees that qubits are not reused within the lifetime of the program and is
a prerequisite for measurement at the end of the program execution.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>annotate-qubit-use</td>
<td>Annotate the number of qubits used</td>
<td>true</td>
</tr>
<tr>
<td>annotate-result-use</td>
<td>Annotate the number of results used</td>
<td>true</td>
</tr>
<tr>
<td>annotate-max-qubit-index</td>
<td>Annotate the maximum qubit index used</td>
<td>true</td>
</tr>
<tr>
<td>annotate-max-result-index</td>
<td>Annotate the maximum result index used</td>
<td>true</td>
</tr>
<tr>
<td>reindex-qubits</td>
<td>Re-indexes statically allocated qubits with sequential ids starting from 0</td>
<td>false</td>
</tr>
<tr>
<td>replace-qubit-on-reset</td>
<td>Replaces a qubit with new qubit if the qubit is reset</td>
<td>false</td>
</tr>
<tr>
<td>inline-after-id-change</td>
<td>Inlines instructions after id was changed</td>
<td>true</td>
</tr>
</tbody>
</table></div>
</div>
          </div>
        </main>
      </div>
    </div>
    <script>
      var base_url = "../..",
          shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
    </script>
    <script src="../../js/base.js" defer></script>
    <script src="../../search/main.js" defer></script>  
  </body>
</html>
